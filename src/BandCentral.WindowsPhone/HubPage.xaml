<Page x:Name="Page"
      x:Class="BandCentral.HubPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      RequestedTheme="Light"
      xmlns:primitives="using:Telerik.UI.Xaml.Controls.Primitives"
      xmlns:controls="using:BandCentral.Controls"
      xmlns:common="using:BandCentral.Common"
      xmlns:xaml="using:BandCentral.Extensions.XAML"
      xmlns:data1="using:Telerik.UI.Xaml.Controls.Data"
      xmlns:userControls="using:BandCentral.UserControls"
      xmlns:windowsBaseControls="using:BandCentral.WindowsBase.Controls"
      Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
      mc:Ignorable="d"
      d:DataContext="{d:DesignData /SampleData/MainViewModelSampleData.xaml}">

    <Page.Transitions>
        <TransitionCollection>
            <NavigationThemeTransition>
                <NavigationThemeTransition.DefaultNavigationTransitionInfo>
                    <ContinuumNavigationTransitionInfo />
                </NavigationThemeTransition.DefaultNavigationTransitionInfo>
            </NavigationThemeTransition>
        </TransitionCollection>
    </Page.Transitions>

    <Page.Resources>
        <DataTemplate x:Key="ThemeHistoryItemTemplate">
            <Grid Margin="-5,0"
                  Height="{Binding ElementName=Page, Path=DataContext.ListItemSize.Height}">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <Grid Background="{Binding BaseBrush}"
                      Margin="5,0,5,5" />
                <Grid Background="{Binding HighlightBrush}"
                      Margin="5,0,5,5"
                      Grid.Column="1" />
                <Grid Background="{Binding SecondaryBrush}"
                      Margin="5,0,5,5"
                      Grid.Column="2" />

                <Grid Background="{Binding LowLightBrush}"
                      Margin="5"
                      Grid.Row="1" />
                <Grid Background="{Binding HighContrastBrush}"
                      Margin="5"
                      Grid.Row="1"
                      Grid.Column="1" />
                <Grid Background="{Binding MutedBrush}"
                      Margin="5"
                      Grid.Row="1"
                      Grid.Column="2" />

                <Rectangle Height="3"
                           Fill="SlateGray"
                           Grid.ColumnSpan="3"
                           Grid.Column="0"
                           Grid.Row="2"
                           Margin="0,5,0,10"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Bottom" />
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="AdaptiveFavsTemplate">
            <Grid x:Name="BaseGrid"
                  Background="{StaticResource LightGrayBrush}"
                  VerticalAlignment="Top"
                  Margin="2,0,2,10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Grid x:Name="TopGrid"
                      HorizontalAlignment="Stretch"
                      Background="{StaticResource DarkGreenBrush}"
                      VerticalAlignment="Top">
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Left"
                                VerticalAlignment="Top"
                                Margin="5,0,0,0">
                        <Path Data="M227.021411376515,3.11325970428836E-13C292.695346313039,-4.3625252046181E-06 349.218234496632,45.8481483459476 349.218234496632,133.302810668946 349.218234496632,190.189529418946 323.333255248585,247.996154785157 289.467563109914,283.886108398438L289.652011352101,283.886108398438C276.65625329546,324.550872802735 297.448031859914,334.195098876953 300.739657836476,335.297546386719 372.904391723195,359.878662109375 454.00000329546,406.17953491211 454.00000329546,453.633880615235 454.00000329546,456.130737304688 454.00000329546,457.795288085938 454.00000329546,458.999969482422L0,458.999969482422C3.29546037391992E-06,457.795288085938 3.29546037391992E-06,456.130737304688 0,453.633880615235 3.29546037391992E-06,407.566680908203 80.7056917720229,360.900848388672 149.47250695757,335.297546386719 154.445147948781,333.421112060547 178.202105956593,320.112030029297 164.915606933156,284.25863647461 130.85141320757,248.441528320313 105.108210998097,190.408523559571 105.108210998097,133.302810668946 105.108210998097,45.8481483459476 161.304889159718,-4.3625252046181E-06 227.021411376515,3.11325970428836E-13z"
                              Stretch="Uniform"
                              Fill="{StaticResource LightBrush}"
                              Width="15"
                              Height="15"
                              Margin="5" />
                        <TextBlock Text="{Binding Photo.OwnerName}"
                                   FontFamily="Century Gothic"
                                   FontSize="12"
                                   Foreground="White"
                                   VerticalAlignment="Center"
                                   Margin="5" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Top"
                                Margin="0,0,5,0">
                        <Path Data="M33.597977,10.759002C37.946865,10.759002 41.485962,14.285001 41.485962,18.649 41.485962,23 37.946865,26.535 33.597977,26.535 29.23909,26.535 25.709992,23 25.709992,18.649 25.709992,17.784 25.849955,16.953001 26.109888,16.174002 26.779719,16.881001 27.70948,17.327002 28.759213,17.327002 30.778696,17.327002 32.418278,15.691001 32.418278,13.668001 32.418278,12.663001 32.008381,11.748001 31.348551,11.087002 32.058369,10.876001 32.818176,10.759002 33.597977,10.759002z M33.606682,4.3679962C25.92741,4.3679957 19.698065,10.594956 19.698065,18.27293 19.698065,25.953894 25.92741,32.177862 33.606682,32.177862 41.295838,32.177862 47.515175,25.953894 47.515175,18.27293 47.515175,10.594956 41.295838,4.3679957 33.606682,4.3679962z M34.867642,1.546141E-09C36.890393,2.6508449E-05 58.705193,0.41938579 68.893006,18.299923 68.893006,18.299923 57.1442,36.139837 34.44656,34.768854 34.44656,34.768854 14.428583,36.59984 0,18.299923 0,18.299923 9.0791523,0.4590019 34.716553,0.0010111886 34.716553,0.0010114873 34.768162,-1.4442128E-06 34.867642,1.546141E-09z"
                              Stretch="Uniform"
                              Width="10"
                              Height="10"
                              Margin="5"
                              Fill="{StaticResource LightBrush}" />
                        <TextBlock Text="{Binding Photo.Views}"
                                   FontFamily="Century Gothic"
                                   FontSize="12"
                                   Margin="5"
                                   VerticalAlignment="Center"
                                   Foreground="{StaticResource LightBrush}" />
                        <Path Data="M98.3943,0C139.588,3E-06 159.372,18.688 182,46.9911 204.628,18.688 224.372,3E-06 265.586,0 270.745,3E-06 276.209,0.287865 282.08,0.895517 317.728,4.53071 358.983,38.8146 364,104.504L364,126.347C359.348,189.201 314.113,266.729 182,364 49.867,266.729 4.6722,189.201 0,126.347L0,104.504C5.01682,38.8146 46.2514,4.53071 81.92,0.895517 87.7698,0.287865 93.2542,3E-06 98.3943,0z"
                              Stretch="Uniform"
                              Width="10"
                              Height="10"
                              Margin="5"
                              Fill="{StaticResource LightBrush}" />
                        <TextBlock Text="{Binding Photo.CountFaves}"
                                   FontFamily="Century Gothic"
                                   FontSize="12"
                                   VerticalAlignment="Center"
                                   Margin="5"
                                   Foreground="{StaticResource LightBrush}" />
                    </StackPanel>
                </Grid>

                <Grid x:Name="PhotoGrid"
                      Grid.Row="1"
                      Background="{StaticResource BlueAgainBlueBrush}"
                      MinHeight="131">

                    <!--<Image Stretch="UniformToFill"
                           Source="{Binding Photo.Medium640Url}"
                           Height="{Binding DataContext.ListItemSize.Height, ElementName=Page}" />-->

                    <windowsBaseControls:NetworkImage ImageUrl="{Binding Photo.Small320Url}"
                                                      ImageStretch="UniformToFill"
                                                      Height="{Binding DataContext.ListItemSize.Height, ElementName=Page}" />

                    <Grid x:Name="TimeGrid"
                          Visibility="{Binding IsExpanded, Converter={StaticResource InvertedBoolToVisibilityConverter}}"
                          VerticalAlignment="Bottom"
                          HorizontalAlignment="Left">
                        <StackPanel Orientation="Horizontal"
                                    d:LayoutOverrides="Height">
                            <TextBlock x:Name="TimeTextBlock"
                                       Text="12:41"
                                       VerticalAlignment="Bottom"
                                       HorizontalAlignment="Left"
                                       FontFamily="Segoe WP SemiLight"
                                       FontSize="96"
                                       Margin="10,0,0,-5"
                                       Foreground="{StaticResource LightBrush}" />
                            <StackPanel VerticalAlignment="Bottom"
                                        Margin="0,0,0,15">
                                <TextBlock Text="Thu"
                                           FontFamily="Segoe UI Light"
                                           Foreground="{StaticResource LightBrush}"
                                           FontSize="24" />
                                <TextBlock Text="02"
                                           FontFamily="Segoe UI Light"
                                           Foreground="{StaticResource LightBrush}"
                                           FontSize="24" />
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <Grid x:Name="ButtonsGrid"
                          Visibility="{Binding IsExpanded, Converter={StaticResource BoolToVisibilityConverter}}"
                          VerticalAlignment="Bottom"
                          Background="{StaticResource HalfTransparentDarkBrush}">
                        <Grid.RenderTransform>
                            <CompositeTransform TranslateY="0" />
                        </Grid.RenderTransform>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <AppBarButton x:Name="FavsButton"
                                      Style="{StaticResource LightListAppbarButtonStyle}"
                                      Command="{Binding DataContext.RemoveFromFavoritesCommand, ElementName=Page}"
                                      CommandParameter="{Binding}"
                                      Grid.Column="0"
                                      Icon="UnFavorite"
                                      Label="Remove from Favorites" />

                        <AppBarButton x:Name="SendToBandButton"
                                      Style="{StaticResource LightListAppbarButtonStyle}"
                                      Command="{Binding DataContext.SendToBandCommand, ElementName=Page}"
                                      CommandParameter="{Binding}"
                                      Grid.Column="1"
                                      Icon="SetLockScreen"
                                      Label="Send to Band now" />

                        <AppBarButton x:Name="EditButton"
                                      Style="{StaticResource LightListAppbarButtonStyle}"
                                      Command="{Binding DataContext.EditImageCommand, ElementName=Page}"
                                      CommandParameter="{Binding}"
                                      Grid.Column="2"
                                      Icon="Crop"
                                      Label="Apply Crop and Filters" />
                    </Grid>
                </Grid>
            </Grid>
        </DataTemplate>
    </Page.Resources>

    <Page.BottomAppBar>
        <CommandBar>
            <CommandBar.SecondaryCommands>
                <AppBarButton x:Name="ClearThemeHistoryButton"
                              Label="clear theme history"
                              Click="ClearThemeHistoryButton_OnClick" />
                <AppBarButton x:Name="SettingsAppBarButton"
                              Label="settings"
                              Click="SettingsAppBarButton_OnClick" />
                <AppBarButton x:Name="AboutAppBarButton"
                              Label="about"
                              Click="AboutAppBarButton_OnClickAppBarButton_OnClick" />
                <AppBarButton x:Name="BetaAppBarButton"
                              Label="beta features (new)"
                              Click="BetaAppBarButton_OnClickAppBarButton_OnClick" />
            </CommandBar.SecondaryCommands>
            <AppBarButton x:Name="LocalPhotoAppbarButton"
                          Label="local photo"
                          Icon="Folder"
                          Click="LocalPhotoAppbarButton_OnClick" />
            <AppBarButton x:Name="FavoritesAppbarButton"
                          Icon="Favorite"
                          Label="favorites"
                          Click="FavoritesAppbarButton_OnClick"
                          Visibility="Collapsed" />
            <AppBarButton x:Name="SearchAppbarButton"
                          Icon="Find"
                          Label="browse"
                          Click="SearchAppbatButton_OnClick">
            </AppBarButton>
            <AppBarButton x:Name="LinkUnlinkAppBarButton"
                          Label="link similar"
                          Icon="Link"
                          Click="LinkUnlinkAppBarButton_OnClick"
                          Visibility="Collapsed">
            </AppBarButton>
            <AppBarButton x:Name="ResetThemeAppBarButton"
                          Icon="ClearSelection"
                          Label="revert"
                          Click="ResetThemeAppBarButton_OnClick"
                          Visibility="Collapsed" />
            <AppBarButton x:Name="SetBandThemeAppBarButton"
                          Icon="SetLockscreen"
                          Label="set theme"
                          Click="SetBandThemeAppBarButton_OnClick"
                          Visibility="Collapsed" />
        </CommandBar>
    </Page.BottomAppBar>

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>

        <Pivot x:Name="MainPivot"
               SelectionChanged="MainPivot_OnSelectionChanged"
               SelectedIndex="0"
               Margin="0,-10,0,0"
               Grid.Row="1">

            <PivotItem x:Name="HomePivotItem"
                       Margin="0">
                <Grid>
                    <data1:RadDataBoundListBox x:Name="FavoritesList"
                                               ItemTemplate="{StaticResource AdaptiveFavsTemplate}"
                                               ItemTap="ResultsList_OnItemTap"
                                               ItemsSource="{Binding FlickrFavs}"
                                               EmptyContentDisplayMode="DataSourceEmpty"
                                               Margin="0,0">
                        <data1:RadDataBoundListBox.EmptyContent>
                            <Button x:Name="EmptyFavoritesButton"
                                    Click="SearchAppbatButton_OnClick"
                                    Background="{StaticResource HalfTransparentDarkBrush}"
                                    Foreground="{StaticResource LightBrush}"
                                    BorderBrush="{StaticResource BlueAgainBlueBrush}"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Margin="0,100,0,0">
                                <Grid>
                                    <StackPanel Margin="10">
                                        <TextBlock Text="You have No Favorites Saved"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontSize="20"
                                                   FontWeight="Light"
                                                   Foreground="{StaticResource LightBrush}"
                                                   Margin="0,0,0,10" />
                                        <TextBlock Text="Click here to get started!"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"
                                                   FontSize="18"
                                                   FontWeight="Light"
                                                   Foreground="{StaticResource LightBrush}" />
                                    </StackPanel>
                                </Grid>
                            </Button>


                        </data1:RadDataBoundListBox.EmptyContent>
                        <data1:RadDataBoundListBox.ListHeaderContent>
                            <StackPanel Margin="0,0">
                                <StackPanel Margin="0,10,0,0"
                                            xaml:Extension.IsVisible="{Binding ElementName=FavoritesList, Path=DataContext.IsBandConnected}">
                                    <TextBlock Text="Current Wallpaper"
                                               FontWeight="Light"
                                               FontFamily="Century Gothic"
                                               HorizontalAlignment="Center"
                                               FontSize="18"
                                               Margin="0,0,0,0" />
                                    <Grid VerticalAlignment="Center"
                                          Margin="0,5,0,0">
                                        <AppBarButton x:Name="ReloadMeTileImageButton"
                                                      Icon="Refresh"
                                                      Label="Reload current Band image"
                                                      HorizontalAlignment="Center"
                                                      Click="ReloadMeTileImageButton_OnClick" />
                                        <Image x:Name="CurrentMeImage"
                                               Source="{Binding ElementName=FavoritesList, Path=DataContext.CurrentBandImage}"
                                               Margin="2,0" />
                                    </Grid>
                                </StackPanel>
                                <Grid>
                                    <TextBlock Text="Favorites"
                                               FontFamily="Century Gothic"
                                               HorizontalAlignment="Center"
                                               FontWeight="Light"
                                               FontSize="18"
                                               Margin="0,10,0,6"
                                               Foreground="#FF343434" />
                                </Grid>
                            </StackPanel>
                        </data1:RadDataBoundListBox.ListHeaderContent>
                    </data1:RadDataBoundListBox>
                </Grid>
            </PivotItem>

            <PivotItem x:Name="ColorsPivotItem"
                       Margin="0">
                <Grid x:Name="BaseContainer">
                    <Grid x:Name="ThemeContainer">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <ScrollViewer HorizontalScrollMode="Enabled"
                                      HorizontalScrollBarVisibility="Visible">
                            <Grid x:Name="PreviewGrid"
                                  Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Grid x:Name="HighlightLowLightGrid"
                                      Grid.Column="0"
                                      Width="{Binding ElementName=Page, Path=DataContext.MeTileSize.Width}"
                                      Height="{Binding ElementName=Page, Path=DataContext.MeTileSize.Height}"
                                      HorizontalAlignment="Center"
                                      Margin="10,20,20,0">

                                    <Grid Background="{Binding CurrentBandTheme.BaseBrush, FallbackValue=DarkGray}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <Grid Grid.Column="0"
                                              Background="{Binding CurrentBandTheme.HighContrastBrush, FallbackValue=DarkGray}">
                                            <TextBlock Text="High Contrast"
                                                       FontFamily="Century Gothic"
                                                       FontSize="12"
                                                       Foreground="{StaticResource LightBrush}"
                                                       HorizontalAlignment="Center"
                                                       Margin="0,5,0,0"
                                                       VerticalAlignment="Top" />
                                            <TextBlock Text="1"
                                                       Foreground="{StaticResource LightBrush}"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"
                                                       TextWrapping="Wrap"
                                                       TextAlignment="Center"
                                                       FontSize="48"
                                                       FontWeight="Light"
                                                       Margin="0,36,0,0" />
                                            <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                  Stretch="Uniform"
                                                  Fill="#FFFFFFFF"
                                                  Width="30"
                                                  Height="30"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center"
                                                  Margin="0,0,0,41" />
                                        </Grid>

                                        <Grid Grid.Column="1"
                                              Background="{Binding CurrentBandTheme.LowLightBrush, FallbackValue=DarkGray}">
                                            <TextBlock Text="Lowlight"
                                                       FontFamily="Century Gothic"
                                                       FontSize="12"
                                                       Foreground="{StaticResource LightBrush}"
                                                       HorizontalAlignment="Center"
                                                       Margin="0,5,0,0"
                                                       VerticalAlignment="Top" />
                                            <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                  Stretch="Uniform"
                                                  Fill="#FFFFFFFF"
                                                  Width="40"
                                                  Height="40"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center" />
                                        </Grid>

                                        <Grid Grid.Column="2">
                                            <TextBlock Text="Base"
                                                       FontFamily="Century Gothic"
                                                       FontSize="12"
                                                       Foreground="{StaticResource LightBrush}"
                                                       HorizontalAlignment="Center"
                                                       Margin="0,5,0,0"
                                                       VerticalAlignment="Top" />
                                            <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                  Stretch="Uniform"
                                                  Fill="#FFFFFFFF"
                                                  Width="40"
                                                  Height="40"
                                                  HorizontalAlignment="Center"
                                                  VerticalAlignment="Center" />
                                        </Grid>

                                        <Rectangle Fill="Black"
                                                   HorizontalAlignment="Right"
                                                   StrokeThickness="0"
                                                   Width="2"
                                                   Margin="0,0,-1,0" />

                                        <Rectangle Fill="Black"
                                                   Grid.Column="1"
                                                   HorizontalAlignment="Right"
                                                   StrokeThickness="0"
                                                   Width="2"
                                                   Margin="0,0,-1,0" />
                                    </Grid>

                                </Grid>

                                <Grid x:Name="WeatherPreviewGrid"
                                      Grid.Column="1"
                                      Width="{Binding ElementName=Page, Path=DataContext.MeTileSize.Width}"
                                      Height="{Binding ElementName=Page, Path=DataContext.MeTileSize.Height}"
                                      Margin="20,20,20,0"
                                      HorizontalAlignment="Center">

                                    <Grid Background="Black">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <StackPanel Orientation="Horizontal"
                                                    Margin="10,5,0,0"
                                                    VerticalAlignment="Top">
                                            <TextBlock Text="Highlight"
                                                       Foreground="{Binding CurrentBandTheme.HighlightBrush, FallbackValue=DarkGray}"
                                                       FontFamily="Segoe UI"
                                                       FontSize="16" />
                                            <TextBlock Text=" | Secondary"
                                                       Foreground="{Binding CurrentBandTheme.SecondaryBrush, FallbackValue=DarkGray}"
                                                       FontFamily="Segoe UI"
                                                       FontSize="16" />
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal"
                                                    Grid.Row="1"
                                                    Margin="10,0,0,0"
                                                    VerticalAlignment="Bottom">
                                            <FontIcon FontFamily="Segoe UI Symbol"
                                                      Glyph="&#xE286;"
                                                      Foreground="{Binding CurrentBandTheme.SecondaryBrush, FallbackValue=DarkGray}"
                                                      FontSize="64" />
                                            <TextBlock Text="45°"
                                                       FontSize="64"
                                                       Foreground="White"
                                                       FontWeight="Light"
                                                       VerticalAlignment="Bottom"
                                                       Margin="0" />
                                        </StackPanel>
                                    </Grid>

                                </Grid>

                                <Grid x:Name="FitnessGrid"
                                      Grid.Column="2"
                                      Width="{Binding ElementName=Page, Path=DataContext.MeTileSize.Width}"
                                      Height="{Binding ElementName=Page, Path=DataContext.MeTileSize.Height}"
                                      Margin="20,20,10,0"
                                      HorizontalAlignment="Center">

                                    <Grid Background="{Binding CurrentBandTheme.BaseBrush, FallbackValue=DarkGray}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition />
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Muted"
                                                   FontFamily="Century Gothic"
                                                   FontSize="12"
                                                   Foreground="{StaticResource LightBrush}"
                                                   HorizontalAlignment="Center"
                                                   Margin="0,5,0,0"
                                                   VerticalAlignment="Top" />
                                        <Ellipse Fill="{Binding CurrentBandTheme.MutedBrush, FallbackValue=DarkGray}"
                                                 Width="70"
                                                 Height="70"
                                                 Margin="20,0" />

                                        <StackPanel HorizontalAlignment="Center"
                                                    VerticalAlignment="Center"
                                                    Margin="0">
                                            <TextBlock Text="1"
                                                       Foreground="White"
                                                       FontFamily="Segoe UI"
                                                       FontSize="24"
                                                       Margin="0,-10"
                                                       FontWeight="Bold" />
                                            <TextBlock Text="mi"
                                                       Foreground="White"
                                                       FontFamily="Segoe UI"
                                                       FontSize="14" />
                                        </StackPanel>
                                        <Grid Grid.Column="1">
                                            <TextBlock Text="Base"
                                                       FontFamily="Century Gothic"
                                                       FontSize="12"
                                                       Foreground="{StaticResource LightBrush}"
                                                       HorizontalAlignment="Center"
                                                       Margin="0,5,0,0"
                                                       VerticalAlignment="Top" />
                                            <TextBlock Foreground="White"
                                                       Text="9:10"
                                                       FontFamily="Segoe UI"
                                                       FontSize="64"
                                                       FontWeight="Bold"
                                                       VerticalAlignment="Center"
                                                       Margin="0,0,0,5" />
                                        </Grid>
                                    </Grid>

                                </Grid>
                            </Grid>
                        </ScrollViewer>

                        <Grid x:Name="PastThemesGrid"
                              MaxWidth="500"
                              Margin="10,0"
                              Grid.Row="1">
                            <data1:RadDataBoundListBox x:Name="ThemeHxListBox"
                                                       ItemsSource="{Binding ThemeHistory}"
                                                       ItemTemplate="{StaticResource ThemeHistoryItemTemplate}"
                                                       FontFamily="Century Gothic"
                                                       ItemTap="ThemeHxListBox_OnItemTap"
                                                       EmptyContent="no previous themes"
                                                       EmptyContentDisplayMode="DataSourceEmpty"
                                                       Margin="0">
                                <data1:RadDataBoundListBox.ListHeaderTemplate>
                                    <DataTemplate>
                                        <Grid x:Name="ColorSelectionGrid"
                                              DataContext="{Binding DataContext, ElementName=ThemeHxListBox}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                                <ColumnDefinition />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                                <RowDefinition Height="Auto" />
                                            </Grid.RowDefinitions>

                                            <!--<TextBlock Text="Theme Color Picker"
                                               Grid.Row="0"
                                               Grid.ColumnSpan="3"
                                               HorizontalAlignment="Center"
                                               FontSize="16"
                                               FontFamily="Century Gothic"
                                               Margin="0,10,0,3"/>-->

                                            <StackPanel Grid.Row="0"
                                                        Grid.ColumnSpan="3"
                                                        Margin="0,5,0,10">
                                                <TextBlock Text="Theme Color Picker"
                                                           FontFamily="Century Gothic"
                                                           FontSize="18" />
                                                <Rectangle Height="2"
                                                           Fill="{StaticResource BlueAgainBlueBrush}" />
                                            </StackPanel>

                                            <Grid x:Name="BaseColorGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="Base"
                                                  Background="{Binding CurrentBandTheme.BaseBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Margin="0,0,5,5"
                                                  Grid.Row="1">
                                                <TextBlock Text="Base Color"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>
                                            <Grid x:Name="HighlightColorGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="Highlight"
                                                  Background="{Binding CurrentBandTheme.HighlightBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Grid.Column="1"
                                                  Grid.Row="1"
                                                  Margin="0,0,0,5">
                                                <TextBlock Text="Highlight Color"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>
                                            <Grid x:Name="SecondaryColorGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="Secondary"
                                                  Background="{Binding CurrentBandTheme.SecondaryBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Grid.Column="2"
                                                  Grid.Row="1"
                                                  Margin="5,0,0,5">
                                                <TextBlock Text="Secondary Color"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>

                                            <Grid x:Name="LowlightGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="LowLight"
                                                  Background="{Binding CurrentBandTheme.LowLightBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Margin="0,0,5,0"
                                                  Grid.Row="2">
                                                <TextBlock Text="Lowlight Color"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>
                                            <Grid x:Name="HighContrastGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="HighContrast"
                                                  Background="{Binding CurrentBandTheme.HighContrastBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Grid.Row="2"
                                                  Grid.Column="1"
                                                  Margin="0">
                                                <TextBlock Text="High Contrast Color"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>
                                            <Grid x:Name="MutedColorGrid"
                                                  Tapped="ThemeColorGrid_Tapped"
                                                  Tag="Muted"
                                                  Background="{Binding CurrentBandTheme.MutedBrush, FallbackValue=DarkGray}"
                                                  Height="70"
                                                  Margin="5,0,0,0"
                                                  Grid.Row="2"
                                                  Grid.Column="2">
                                                <TextBlock Text="Muted Color"
                                                           Foreground="{StaticResource LightBrush}"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Bottom"
                                                           FontFamily="Century Gothic"
                                                           FontSize="11"
                                                           Margin="0,0,0,5"
                                                           TextWrapping="Wrap"
                                                           TextAlignment="Center" />
                                                <Path Data="M6.9478922,7.0470004L9.6886292,9.2383013 12.428207,7.0470004 19.375999,11.251 0,11.251z M19.585001,1.0830001L19.585001,10.221 13.061,6.2626729z M0,1.0830001L6.5219998,6.2626729 0,10.221z M0,0L19.376001,0 9.6886301,7.7509999z"
                                                      Stretch="Uniform"
                                                      Fill="#FFFFFFFF"
                                                      Width="39"
                                                      Height="39"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      Margin="0,0,0,20" />
                                            </Grid>

                                            <Path x:Name="ColorLinkIcon1"
                                                  Data="M7.7709281,11.040411C8.3477862,11.04786,8.923774,11.156583,9.4698895,11.366144L8.0361993,12.799638C7.1253419,12.707338,6.1818323,12.995037,5.4852486,13.691533L2.6576099,16.51852C1.4276628,17.748915 1.4269924,19.751505 2.6576099,20.981899 3.8880777,22.212494 5.8908739,22.212494 7.1213515,20.981899L9.9489598,18.155113C10.645704,17.458416,10.933422,16.514521,10.841016,15.603024L12.274706,14.169432C12.945349,15.916823,12.583926,17.970215,11.174437,19.380308L8.3467691,22.207294C6.4370384,24.117386 3.3412533,24.117386 1.4321928,22.208395 -0.47739792,20.298304 -0.47739792,17.203318 1.4321928,15.293126L4.259841,12.466339C5.2285414,11.497793,6.5018411,11.024022,7.7709281,11.040411z M14.645898,7.6959996L15.942,8.9930334 8.9308417,16.004999 7.6339998,14.709355z M18.751149,0C20.002433,0 21.253716,0.47753191 22.208506,1.4325956 24.117282,3.3413134 24.117282,6.4363513 22.207806,8.3465986L19.380441,11.173371C17.970859,12.583447,15.917485,12.94414,14.170206,12.273652L15.603688,10.840076C16.515077,10.932475,17.458565,10.64468,18.155056,9.9480915L20.982521,7.1212792C22.212406,5.8909502 22.213005,3.8883042 20.982521,2.6579149 19.752136,1.4274058 17.749461,1.4274058 16.519076,2.6579149L13.691713,5.4847069C12.995721,6.1812258,12.707325,7.1239595,12.799723,8.0354433L11.366141,9.4688301C10.69555,7.721549,11.057546,5.668304,12.466328,4.259388L15.293792,1.4325956C16.24858,0.47753191,17.499865,0,18.751149,0z"
                                                  Stretch="Uniform"
                                                  Fill="White"
                                                  Stroke="Black"
                                                  StrokeThickness="0.5"
                                                  Width="40"
                                                  Height="40"
                                                  IsHitTestVisible="False"
                                                  RenderTransformOrigin="0.5,0.5"
                                                  Grid.Row="1"
                                                  Grid.RowSpan="2"
                                                  HorizontalAlignment="Left"
                                                  VerticalAlignment="Center"
                                                  Visibility="{Binding ElementName=Page, Path=AreColorsLinked, Converter={StaticResource BoolToVisibilityConverter}}"
                                                  Margin="-8,0,0,0">
                                                <Path.RenderTransform>
                                                    <TransformGroup>
                                                        <RotateTransform Angle="315" />
                                                        <ScaleTransform ScaleX="1"
                                                                        ScaleY="1" />
                                                    </TransformGroup>
                                                </Path.RenderTransform>
                                            </Path>

                                            <Path x:Name="ColorLinkIcon2"
                                                  Data="M7.7709281,11.040411C8.3477862,11.04786,8.923774,11.156583,9.4698895,11.366144L8.0361993,12.799638C7.1253419,12.707338,6.1818323,12.995037,5.4852486,13.691533L2.6576099,16.51852C1.4276628,17.748915 1.4269924,19.751505 2.6576099,20.981899 3.8880777,22.212494 5.8908739,22.212494 7.1213515,20.981899L9.9489598,18.155113C10.645704,17.458416,10.933422,16.514521,10.841016,15.603024L12.274706,14.169432C12.945349,15.916823,12.583926,17.970215,11.174437,19.380308L8.3467691,22.207294C6.4370384,24.117386 3.3412533,24.117386 1.4321928,22.208395 -0.47739792,20.298304 -0.47739792,17.203318 1.4321928,15.293126L4.259841,12.466339C5.2285414,11.497793,6.5018411,11.024022,7.7709281,11.040411z M14.645898,7.6959996L15.942,8.9930334 8.9308417,16.004999 7.6339998,14.709355z M18.751149,0C20.002433,0 21.253716,0.47753191 22.208506,1.4325956 24.117282,3.3413134 24.117282,6.4363513 22.207806,8.3465986L19.380441,11.173371C17.970859,12.583447,15.917485,12.94414,14.170206,12.273652L15.603688,10.840076C16.515077,10.932475,17.458565,10.64468,18.155056,9.9480915L20.982521,7.1212792C22.212406,5.8909502 22.213005,3.8883042 20.982521,2.6579149 19.752136,1.4274058 17.749461,1.4274058 16.519076,2.6579149L13.691713,5.4847069C12.995721,6.1812258,12.707325,7.1239595,12.799723,8.0354433L11.366141,9.4688301C10.69555,7.721549,11.057546,5.668304,12.466328,4.259388L15.293792,1.4325956C16.24858,0.47753191,17.499865,0,18.751149,0z"
                                                  Stretch="Uniform"
                                                  IsHitTestVisible="False"
                                                  Fill="White"
                                                  Stroke="Black"
                                                  StrokeThickness="0.5"
                                                  Width="40"
                                                  Height="40"
                                                  RenderTransformOrigin="0.5,0.5"
                                                  Grid.Row="1"
                                                  Grid.RowSpan="2"
                                                  HorizontalAlignment="Left"
                                                  VerticalAlignment="Center"
                                                  Grid.Column="1"
                                                  Visibility="{Binding ElementName=Page, Path=AreColorsLinked, Converter={StaticResource BoolToVisibilityConverter}}"
                                                  Margin="-8,0,0,0">
                                                <Path.RenderTransform>
                                                    <TransformGroup>
                                                        <RotateTransform Angle="315" />
                                                        <ScaleTransform ScaleX="1"
                                                                        ScaleY="1" />
                                                    </TransformGroup>
                                                </Path.RenderTransform>
                                            </Path>

                                            <StackPanel Grid.Row="3"
                                                        Grid.ColumnSpan="3"
                                                        Margin="0,5,0,10">
                                                <TextBlock Text="Recently Used Themes"
                                                           FontFamily="Century Gothic"
                                                           FontSize="18" />
                                                <Rectangle Height="2"
                                                           Fill="{StaticResource BlueAgainBlueBrush}" />
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </data1:RadDataBoundListBox.ListHeaderTemplate>

                            </data1:RadDataBoundListBox>
                        </Grid>
                    </Grid>

                    <windowsBaseControls:ColorPicker x:Name="Picker"
                                          ColorSelectionChanged="ColorPicker_OnColorSelectionChanged"
                                          Visibility="Collapsed" />
                </Grid>

            </PivotItem>
        </Pivot>

        <Grid x:Name="HeaderGrid"
              Grid.Row="0"
              Height="50"
              VerticalAlignment="Top"
              Background="{StaticResource BlueAgainBlueBrush}">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <!--<Grid x:Name="LogoGrid"
                  Margin="5"
                  Width="30"
                  Height="30"
                  Visibility="{Binding IsNetworkConnected}">
                <FontIcon Glyph="" FontFamily="Segoe UI Symbol"/>
            </Grid>-->

            <ListView Grid.Column="1"
                      ItemContainerStyle="{StaticResource HeaderListViewStyle}"
                      SelectedIndex="{Binding SelectedIndex, ElementName=MainPivot, Mode=TwoWay}"
                      VerticalAlignment="Bottom">
                <ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <common:SplitPanel />
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>
                <ListViewItem>
                    <controls:PathControl Content="images"
                                          Margin="0,5,0,0" />
                </ListViewItem>
                <ListViewItem>
                    <controls:PathControl Content="theme colors"
                                          Margin="0,5,0,0" />
                </ListViewItem>
            </ListView>
        </Grid>

        <Border  x:Name="MessageGrid"
                 Visibility="Collapsed"
                 Background="#D8000000"
                 VerticalAlignment="Stretch"
                 BorderBrush="#FFEDF800"
                 BorderThickness="5"
                 Grid.Row="0" 
                 Grid.RowSpan="2">

            <Grid>
                <TextBlock Text="UPDATED!"
                           Foreground="White"
                           FontSize="32"
                           Margin="10,5,0,0" />

                <TextBlock x:Name="MessageTextBlock"
                           TextWrapping="Wrap"
                           Margin="10,50,10,0"
                           FontSize="16"
                           VerticalAlignment="Top"
                           Foreground="White">
                	<Run Foreground="#FFFFEE02"
                         FontWeight="Bold"
                         Text="-Band Connection" />
                	<LineBreak />
                	<Run Text="We've completely rewritten the Band connection logic. This fixes all the problems with connecting to your Band when setting an image or theme. If you see any issues again, please contact us right away as it should not happen any more." />
                	<LineBreak />
                	<Run />
                	<LineBreak />
                	<Run Foreground="#FFFFEE02"
                         FontWeight="Bold"
                         Text="-Band Themes" />
                	<LineBreak />
                	<Run Text="Next we've redesigned the Themes pivot so you have more room to see your old themes" />
                	<LineBreak />
                	<Run />
                	<LineBreak />
                	<Run Foreground="#FFFFEE02"
                         FontWeight="Bold"
                         Text="-Beta Features" />
                	<LineBreak />
                	<Run Text="We've added a couple test features for you to play with before they become integrated. " />
                	<Run FontFamily="Segoe UI, Tahoma, Arial, Arial Unicode MS, Microsoft Sans Serif, Lucida Sans Unicode"
                         Text="Go to the Settings page and swipe over to the beta tab." />
                	<LineBreak />
                	<Run />
                	<LineBreak />
                	<Run Text="1-Favorites backup and restore" />
                	<LineBreak />
                	<Run Text="2-New Image Providers" />
                	<LineBreak />
                	<Run Text="    -Bing Image of the Day" />
                	<LineBreak />
                	<Run Text="    -500px.com image search" />
                	<LineBreak />
                	<Run />
                	<LineBreak />
                	<Run Foreground="#FFFFEE02"
                         FontWeight="Bold"
                         Text="-Windows 10 Universal app" />
                	<LineBreak />
                	<Run Text="The UWP version (PC and Mobile) is coming VERY soon! With support for Continuum and has background tasks to automatically set your Band from your favs" />
                </TextBlock>

                <Button x:Name="CloseMessageButton"
                        Content="X"
                        FontFamily="Century Gothic"
                        Foreground="Black"
                        Click="CloseMessageButton_OnClick"
                        Margin="10,-8,0,0"
                        Background="White"
                        BorderBrush="Black"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        MinWidth="50"
                        MinHeight="60"
                        Padding="0" />
            </Grid>
        </Border>

        <primitives:RadBusyIndicator IsActive="{Binding IsBusy}"
                                     Content="{Binding IsBusyMessage}"
                                     Background="#BF000000"
                                     AnimationStyle="AnimationStyle7"
                                     Grid.Row="0"
                                     Grid.RowSpan="2"
                                     Foreground="White"
                                     d:IsHidden="True" />

        <userControls:BandConnection x:Name="BandConnectionDialog"
                                     Grid.Row="0"
                                     Grid.RowSpan="2"
                                     Visibility="{Binding IsBandConnected, Converter={StaticResource InvertedBoolToVisibilityConverter}, FallbackValue=Collapsed}" />

        <userControls:ReviewReminder x:Name="Reminder"
                                     Grid.Row="0"
                                     Grid.RowSpan="2"
                                     d:IsHidden="True" />
    </Grid>
</Page>